function login(){
  const telefono = document.getElementById("loginTelefono").value.trim();
  fetch("/login",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({telefono})
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.error) return alert("Usuario no encontrado");
    
    // GUARDAR Y VERIFICAR
    localStorage.setItem("sesion", JSON.stringify(d));
    
    // Esta alerta nos dirá la verdad:
    alert("Guardado en sesión: " + JSON.stringify(d));
    
    if(d.rol === "chofer") location.href = "/chofer/index.html";
    else if(d.rol === "pasajero") location.href = "/pasajero/index.html";
    else alert("Rol no reconocido: " + d.rol);
  });
}
